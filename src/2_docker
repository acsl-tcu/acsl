function update_tag_list() {
  # function to update tag_list file in $ACSL_ROS2_DIR
  echo UPDATE TAG_LIST
  cd $ACSL_ROS2_DIR
  git checkout .
  res=$(docker run --rm quay.io/skopeo/stable:v1.9.2 list-tags --debug docker://kasekiguchi/acsl-common)
  res=$(echo ${res##*[})
  res=$(echo ${res%%]*})
  echo ${res//,/} >$ACSL_ROS2_DIR/tag_list

  ## PROJECT_LIST
  echo UPDATE PROJECT_LIST
  project_list=$(gh repo list acsl-tcu | grep project | fmt | awk '{print $1}' | sed -e "s|acsl-tcu/project_||g")
  echo $project_list >$ACSL_ROS2_DIR/project_list

  ## PACKAGE_LIST
  echo UPDATE PACKAGE_LIST
  gh repo clone acsl-tcu/acsl_package temp
  cd temp
  git branch -a | grep /origin | grep -v HEAD | sed 's|remotes/origin/||g' >$ACSL_ROS2_DIR/package_list
  cd ..
  rm -fr temp

  ## 登録
  git add .
  git commit -m "update tag_list, package_list and project_list"
  git push
}

function dpull_check_tag() {
  # $1 = TAG_NAME
  # docker pull image with TAG_NAME if TAG_NAME in tag_list
  tag=$1
  res=$(cat $ACSL_ROS2_DIR/tag_list | grep -w $tag)
  if [[ -n $res ]]; then
    gecho DOCKER PULL: image $tag
    $ACSL_ROS2_DIR/0_host_commands/scripts/dpull $tag
  else
    recho "Not found the image with $tag\n Request update tag list"
  fi
}

function dockerfile_dpull() {
  # $1 = dockerfile.TAG_NAME
  # docker pull image with TAG_NAME if it exists
  TAG=${1##*dockerfile.}
  dpull_check_tag $TAG
}
